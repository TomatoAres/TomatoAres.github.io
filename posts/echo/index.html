<!doctype html>
<html lang="zh-cn">
  <head>
    <title>Echo的简单使用 // 西红柿的博客</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.56.3" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="TomatoAres" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://TomatoAres.github.io/css/main.min.59023e5fd38d6ecb0e1dfbb295077c3c67e00e3b9eb3feaf34b5a5e6b332897a.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Echo的简单使用"/>
<meta name="twitter:description" content="echo框架的简单使用 本文是工作刚接触 go 语言，需要作分享时做的一份总结，重新整理的结果。
源码
特性概述 总的来说：轻量·高效
 优化的HTTP路由器，巧妙地确定路由优先级
 构建健壮且可伸缩的RESTful API
 组API
 可扩展的中间件框架
 以根，组或路径级别定义中间件
 JSON，XML和表单的数据绑定
 便捷地发送各种HTTP响应
 集中的HTTP错误处理
 可以使用任何模板引擎
 自定义logger
 高度可定制
 从 Let’s Encrypt（第三方网站）自动加载TLS
 HTTP / 2支持
  简单例子：helloworld package main import ( &quot;net/http&quot; &quot;github.com/labstack/echo&quot; &quot;github.com/labstack/echo/middleware&quot; ) func main() { //创建echo对象 e := echo.New() //中间件 e.Use(middleware.Logger()) e.Use(middleware.Recover()) //路由route 映射 handler（函数） e.GET(&quot;/&quot;, func(c echo.Context) error { return c.String(http.StatusOK, &quot;Hello, World!"/>

    <meta property="og:title" content="Echo的简单使用" />
<meta property="og:description" content="echo框架的简单使用 本文是工作刚接触 go 语言，需要作分享时做的一份总结，重新整理的结果。
源码
特性概述 总的来说：轻量·高效
 优化的HTTP路由器，巧妙地确定路由优先级
 构建健壮且可伸缩的RESTful API
 组API
 可扩展的中间件框架
 以根，组或路径级别定义中间件
 JSON，XML和表单的数据绑定
 便捷地发送各种HTTP响应
 集中的HTTP错误处理
 可以使用任何模板引擎
 自定义logger
 高度可定制
 从 Let’s Encrypt（第三方网站）自动加载TLS
 HTTP / 2支持
  简单例子：helloworld package main import ( &quot;net/http&quot; &quot;github.com/labstack/echo&quot; &quot;github.com/labstack/echo/middleware&quot; ) func main() { //创建echo对象 e := echo.New() //中间件 e.Use(middleware.Logger()) e.Use(middleware.Recover()) //路由route 映射 handler（函数） e.GET(&quot;/&quot;, func(c echo.Context) error { return c.String(http.StatusOK, &quot;Hello, World!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://TomatoAres.github.io/posts/echo/" />
<meta property="article:published_time" content="2019-08-16T16:57:56+08:00" />
<meta property="article:modified_time" content="2019-08-16T16:57:56+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://TomatoAres.github.io/"><img class="app-header-avatar" src="https://TomatoAres.github.io/avatar.jpg" alt="TomatoAres" /></a>
      <h1>西红柿的博客</h1>
      <p>Awesome TomatoAres</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/TomatoAres"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://segmentfault.com/u/zhanshenxihongshi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></a>
        
          <a target="_blank" href="https://me.csdn.net/shuaishi098"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Echo的简单使用</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Aug 16, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://TomatoAres.github.io/tags/go/">go</a><a class="tag" href="https://TomatoAres.github.io/tags/web/">web</a></div></div>
    </header>
    <div class="post-content">
      

<h1 id="echo框架的简单使用">echo框架的简单使用</h1>

<p>本文是工作刚接触 go 语言，需要作分享时做的一份总结，重新整理的结果。</p>

<p><a href="https://github.com/labstack/echo">源码</a></p>

<h2 id="特性概述">特性概述</h2>

<p>总的来说：<strong><em>轻量·高效</em></strong></p>

<ul>
<li><p>优化的HTTP路由器，巧妙地确定路由优先级</p></li>

<li><p>构建健壮且可伸缩的RESTful API</p></li>

<li><p>组API</p></li>

<li><p>可扩展的中间件框架</p></li>

<li><p>以根，组或路径级别定义中间件</p></li>

<li><p>JSON，XML和表单的数据绑定</p></li>

<li><p>便捷地发送各种HTTP响应</p></li>

<li><p>集中的HTTP错误处理</p></li>

<li><p>可以使用任何模板引擎</p></li>

<li><p>自定义logger</p></li>

<li><p>高度可定制</p></li>

<li><p>从 Let’s Encrypt（第三方网站）自动加载TLS</p></li>

<li><p>HTTP / 2支持</p></li>
</ul>

<h2 id="简单例子-helloworld">简单例子：helloworld</h2>

<pre><code class="language-go">package main

import (
	&quot;net/http&quot;

	&quot;github.com/labstack/echo&quot;
	&quot;github.com/labstack/echo/middleware&quot;
)

func main() {
	//创建echo对象
	e := echo.New()

	//中间件
	e.Use(middleware.Logger())
	e.Use(middleware.Recover())

	//路由route 映射 handler（函数）
	e.GET(&quot;/&quot;, func(c echo.Context) error {
		return c.String(http.StatusOK, &quot;Hello, World!\n&quot;)
	})

	// 启动服务 （绑定ip: port）
	e.Logger.Fatal(e.Start(&quot;:1323&quot;))
}
</code></pre>

<ul>
<li>启动后访问 <a href="http://localhost：1323">http://localhost：1323</a> ，即可见效果</li>
<li>可能无法访问，公司的代理服务器需要配置一下：</li>
<li>网络-》代理-》勾选 “请勿将代理服务器用于本地（Intranet）地址”</li>
</ul>

<h2 id="context">Context</h2>

<ul>
<li>功能：接受请求Request&mdash;处理&mdash;返回相应Response</li>
<li>echo.Context 代表了当前 HTTP 请求的 context（上下文？这里看个人理解吧，就不翻译了）。 它含有请求和相应的引用，路径，路径参数，数据，注册的业务处理方法和读取请求和输出响应的API。</li>
<li>由于 Context 是一个接口，所以也可以很方便的使用自定义的 API 扩展。</li>
</ul>

<h3 id="常用-api">常用 API</h3>

<p>1.请求 响应对象</p>

<pre><code>Request() *http.Request
Response() *Response
</code></pre>

<p>2.从request获取参数</p>

<pre><code>Param(name string) string
ParamNames() []string
ParamValues() []string

QueryParam(name string) string
FormParams() (url.Values, error)
</code></pre>

<p>3.cookie  配合标准库http.Cookie使用</p>

<pre><code>Cookie(name string) (*http.Cookie, error)
SetCookie(cookie *http.Cookie)
Cookies() []*http.Cookie
</code></pre>

<p>4.响应</p>

<pre><code>String(code int, s string) error

HTML(code int, html string) error
HTMLBlob(code int, b []byte) error

JSON(code int, i interface{}) error
JSONPretty(code int, i interface{}, indent string) error
JSONBlob(code int, b []byte) error

XML(code int, i interface{}) error
XMLPretty(code int, i interface{}, indent string) error
XMLBlob(code int, b []byte) error

Blob(code int, contentType string, b []byte) error
Stream(code int, contentType string, r io.Reader) error
File(file string) error
</code></pre>

<ul>
<li>源码：echo.context</li>
</ul>

<h2 id="路由映射">路由映射</h2>

<ul>
<li><p>路由可以通过特定的 HTTP 方法， url 路径和一个匹配的 handler 来注册。</p></li>

<li><p>用法： 方法（路径，handler，&lt;中间件&gt;）</p></li>

<li><p>rest API示例（restful范式）:</p></li>
</ul>

<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">restful操作</th>
<th align="left">http响应结果</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">e.POST(&ldquo;/users&rdquo;, createUser)</td>
<td align="left">Create</td>
<td align="left">201 Created</td>
</tr>

<tr>
<td align="left">e.GET(&ldquo;/users/:id&rdquo;, getUser)</td>
<td align="left">Retrieve</td>
<td align="left">200 OK</td>
</tr>

<tr>
<td align="left">e.PUT(&ldquo;/users/:id&rdquo;,updateUser)</td>
<td align="left">Update</td>
<td align="left">200 OK</td>
</tr>

<tr>
<td align="left">e.DELETE(&ldquo;/users/:id&rdquo;, deleteUser)</td>
<td align="left">Delete</td>
<td align="left">204 NotContent  Create   201 Created</td>
</tr>
</tbody>
</table>

<ul>
<li>源码：echo.echo</li>
</ul>

<h3 id="路径匹配顺序-按下表从上到下的顺序匹配">路径匹配顺序(按下表从上到下的顺序匹配)</h3>

<table>
<thead>
<tr>
<th align="left">分类</th>
<th align="left">url</th>
<th align="left">特点</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Static (固定路径)</td>
<td align="left">/users/new</td>
<td align="left">固定，唯一</td>
</tr>

<tr>
<td align="left">Param (参数路径)</td>
<td align="left">/users/:id</td>
<td align="left">:id参数</td>
</tr>

<tr>
<td align="left">Match any (匹配所有)</td>
<td align="left">/users/1/files/*</td>
<td align="left">*通配符 所有</td>
</tr>
</tbody>
</table>

<h3 id="组路由">组路由：</h3>

<ul>
<li>特点：相同的前缀<br /></li>
<li>功能：分类，批量处理<br /></li>
</ul>

<h2 id="静态文件">静态文件</h2>

<ul>
<li>图片，JavaScript，CSS，PDF，字体文件等等…</li>
<li>专门创造一个目录保存这些文件</li>

<li><p>配置：</p>

<pre><code class="language-bash">e := echo.New() 
e.Static(&quot;/static&quot;, &quot;assets&quot;) // 将所有访问 /static/* 的请求去访问 assets 目录。 

// 例如， 一个访 问 /static/js/main.js 的请求会匹配到
// assets/js/main.js 这个文件
</code></pre></li>
</ul>

<p>6.模板渲染</p>

<p>配合标准库html/template</p>

<p>Render(code int, name string, data interface{}) error
用于渲染一个模板，然后发送一个 text/html 的状态响应。</p>

<p>我们可以使用任何模板引擎，只要赋值给 Echo.Renderer</p>

<p>代码示例：</p>

<pre><code class="language-go">package main

import &quot;os&quot;
import &quot;html/template&quot;

type Inventory struct {
	Material string
	Count    uint
}

func main() {
	sweaters := Inventory{&quot;wool&quot;, 17}
	tmpl, err := template.New(&quot;test&quot;).Parse(&quot;{{.Count}} of {{.Material}}&quot;)
	if err != nil {
		panic(err)
	}
	err = tmpl.Execute(os.Stdout, sweaters)
	if err != nil {
		panic(err)
	}
</code></pre>

<pre><code>// out
输出：17 of wool
</code></pre>

    </div>
    <div class="post-footer">
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "Ares-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </article>

    </main>
  </body>
</html>
